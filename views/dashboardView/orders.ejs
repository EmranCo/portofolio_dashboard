<!DOCTYPE html>
<html lang="en">

<%- include('../../Assets/components/Admin/head.ejs');  %>
    <%- include('../../Assets/components/Admin/links.ejs');  %>

        <body onload="disapleAll();">
            <div class="bodyStructure">
                <%- include('../../Assets/components/Admin/header.ejs');  %>

                    <div class="container">
                        <%- include('../../Assets/components/Admin/thembtn.ejs');  %>

                            <section id="orders" class="card">
                                <main>
                                    <div class="position-relative">
                                        <h1>Incompleted Orders</h1>
                                        <div class="dropdown no-arrow mx-1 position-absolute" style="top:10px; right: 10px;">
                                            <a role="button" class="curr-text dropdown-toggle" id="optionsMenue" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                                <i class="fas fa-ellipsis-v" style="font-size: 1.5em;"></i></a>
                                            <ul class="dropdown-list dropdown-menu shadow animated--grow-in custom-margin" aria-labelledby="optionsMenue" style="right: 0;">
                                                <li class="p-2">
                                                    <a class="dropdown-item" role="button" data-toggle="modal" data-target="#deleteAllOrders">
                                                        <i class="far fa-trash-alt text-danger"></i>
                                                        <span class="d-inline-block"> Delete</span>
                                                    </a>
                                                </li>
                                                <li class="p-2">
                                                    <a class="dropdown-item" role="button" data-toggle="modal" data-target="#showTrashedOrders">
                                                        <i class="fa fa-solid fa-trash-can-undo text-primary"></i>
                                                        <span class="d-inline-block"> Completed</span>
                                                    </a>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>

                                    <div class="wrapper">

                                        <div class="container">
                                            <div class="row">
                                                <div class="">
                                                    <div class="fresh-table table w-100">
                                                        <table id="fresh-table" class="table" style="color: var(--current-text-color);">
                                                            <thead>
                                                                <th>Full Name</th>
                                                                <th>Email</th>
                                                                <th>Service</th>
                                                                <th>Subject</th>
                                                                <th>State</th>
                                                                <th>Actions</th>
                                                            </thead>

                                                            <tbody>
                                                                <% for(const order in orders)
                                                        if (Object.hasOwnProperty.call(orders, order)) { %>
                                                                    <tr>
                                                                        <td>
                                                                            <%= orders[order].fullName %>
                                                                        </td>
                                                                        <td>
                                                                            <%= orders[order].email %>
                                                                        </td>
                                                                        <td>
                                                                            <%= orders[order].service %>
                                                                        </td>
                                                                        <td>
                                                                            <%= orders[order].subject %>
                                                                        </td>

                                                                        <td>
                                                                            <% if(orders[order].state==1) { %>
                                                                                <i class="fa fa-solid fa-eye"></i>
                                                                                <%} else { %>
                                                                                    <i class="fa fa-solid fa-eye-slash"></i>
                                                                                    <% } %>

                                                                        </td>
                                                                        <td>
                                                                            <div>
                                                                                <i class="far fa-trash-alt text-danger" role="button" data-toggle="modal" data-target="#deleteOrder" onclick="linkDeleteID('<%= orders[order]._id; %>');"></i>
                                                                            </div>
                                                                        </td>
                                                                    </tr>
                                                                    <% } %>
                                                            </tbody>
                                                        </table>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </main>

                            </section>
                    </div>
            </div>
            <%- include('../../Assets/components/Admin/footer.ejs');  %>
                <%- include('../../Assets/components/formModels/orders.ejs');  %>

                    <script>
                        function linkDeleteID(id) {
                            document.getElementById('deleteOrderID').value = id;
                            console.log(id);
                        }

                        function linkTrashID(id) {
                            document.getElementById('undoOrderID').value = id;
                            console.log(id);
                        }
                    </script>
        </body>


</html>